"0",""
"0","# Here you can load in and clean the survey data (you may need to do the cleaning in a separate R script). "
"0","# First, if you don't already have it, install the devtools package:"
"0","# install.packages(""devtools"")"
"0",""
"0","# Now use devtools to install the cesR package directly from Github:"
"0","# devtools::install_github(""hodgettsp/cesR"")"
"0",""
"0","# Load it like any other package:"
"0","#library(cesR)"
"0",""
"0","# There are many different CES datasets, and they have unique codes. "
"0","# See them with the get_cescodes() function:"
"0",""
"0","#get_cescodes()"
"0",""
"0","# Now pick one, let's try ces2019_phone"
"0",""
"0","#get_ces(""ces2019_phone"")"
"0",""
"0","#survey_data <- ces2019_phone"
"0",""
"0","# Alternative to what is in the comments above, I have locally loaded"
"0","# and (mildly) cleaned the CES2019 phone data and have included it in here."
"0","# We can load it in:"
"0",""
"0","survey_data <- read_csv(""ces2019-phone_clean.csv"")"
"2","Warning:"
"2"," One or more parsing issues, see `problems()` for details
"
"1","[1mRows: [22m[34m4021[39m [1mColumns: [22m[34m278[39m
"
"1","[36mâ”€â”€[39m [1mColumn specification[22m [36mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[39m
[1mDelimiter:[22m "",""
[31mchr[39m   (29): interviewer_gender_CES, interviewer_gender_PES, q7, q72, q8_70, q11_70, q12_70, q33_70, q34_70, q35_70,...
[32mdbl[39m  (245): sample_id, survey_end_month_CES, survey_end_day_CES, num_attempts_CES, interviewer_id_CES, language_CES...
[33mlgl[39m    (2): q73, q74
[34mdttm[39m   (2): survey_end_CES, survey_end_PES
"
"1","
[36mâ„¹[39m Use `spec()` to retrieve the full column specification for this data.
[36mâ„¹[39m Specify the column types or set `show_col_types = FALSE` to quiet this message.
"
"0","vars1 <-  c(""q11"", ""age"", ""q3"", ""q4"", ""q61"", ""q62"", ""q69"", ""p50"", ""p56_1"", ""p56_2"")"
"0","survey_data <- survey_data[vars1]"
"0","survey_data <- drop_na(survey_data)"
"0",""
"0","survey_data <- survey_data %>% "
"0","  rename("
"0","    party_to_vote_for = q11,"
"0","    sex = q3,"
"0","    province = q4,"
"0","    education = q61,"
"0","    religion = q62,"
"0","    income = q69,"
"0","    marital_status = p50,"
"0","    english = p56_1,"
"0","    french = p56_2"
"0","  )"
"0",""
"0","survey_data <- subset(survey_data, sex == 1 | sex == 2)"
"0","survey_data <- subset(survey_data, party_to_vote_for == 1 | party_to_vote_for == 2)"
"0","survey_data$party_to_vote_for[survey_data$party_to_vote_for == 2] <- 0"
"0","survey_data <- survey_data[!(survey_data$income == -8 | survey_data$income == -9),]"
"0",""
"0","num_sum_income <- summary(survey_data$income)"
"0","num_sd_income <- sd(survey_data$income)"
"0","hist1 <- ggplot(survey_data, aes(x = income)) +"
"0","  geom_histogram(binwidth = 15000, fill = ""grey"", color = ""black"") +"
"0","  geom_vline(xintercept = median(survey_data$income), colour = ""red"", linetype = ""dotdash"") + "
"0","  labs(x = ""Income"","
"0","       y = ""Count"","
"0","       title = "" Figure 1: Distribution for the \n Income Values in the Survey"")"
"0",""
"0","survey_data$income[survey_data$income >= 125000] <- ""$125,000 and more"""
"0","survey_data$income[survey_data$income >= 100000 & survey_data$income <= 149999 ] <- ""$100,000 to $ 124,999"""
"0","survey_data$income[survey_data$income >= 75000 & survey_data$income <= 99999 ] <- ""$75,000 to $99,999"""
"0","survey_data$income[survey_data$income >= 50000 & survey_data$income <= 74999 ] <- ""$50,000 to $74,999"""
"0","survey_data$income[survey_data$income >= 25000 & survey_data$income <= 49999 ] <- ""$25,000 to $49,999"""
"0","survey_data$income[survey_data$income >= 0 & survey_data$income < 25000 ] <- ""Less than $25,000"""
"0","survey_data$religion[survey_data$religion == ""-9""] <- ""Don't know"""
"0","survey_data$religion[survey_data$religion == ""1""] <- ""Has religious affiliation"" "
"0","survey_data$religion[survey_data$religion == ""2""] <- ""Has religious affiliation""  "
"0","survey_data$religion[survey_data$religion == ""3""] <- ""Has religious affiliation""  "
"0","survey_data$religion[survey_data$religion == ""4""] <- ""Has religious affiliation""  "
"0","survey_data$religion[survey_data$religion == ""5""] <- ""Has religious affiliation""  "
"0","survey_data$religion[survey_data$religion == ""6""] <- ""Has religious affiliation""  "
"0","survey_data$religion[survey_data$religion == ""7""] <- ""Has religious affiliation""  "
"0","survey_data$religion[survey_data$religion == ""8""] <- ""Has religious affiliation""  "
"0","survey_data$religion[survey_data$religion == ""9""] <- ""Has religious affiliation""  "
"0","survey_data$religion[survey_data$religion == ""10""] <- ""Has religious affiliation""  "
"0","survey_data$religion[survey_data$religion == ""11""] <- ""Has religious affiliation""  "
"0","survey_data$religion[survey_data$religion == ""12""] <- ""Has religious affiliation""  "
"0","survey_data$religion[survey_data$religion == ""13""] <- ""Has religious affiliation""  "
"0","survey_data$religion[survey_data$religion == ""14""] <- ""Has religious affiliation""  "
"0","survey_data$religion[survey_data$religion == ""15""] <- ""Has religious affiliation""  "
"0","survey_data$religion[survey_data$religion == ""16""] <- ""Has religious affiliation""  "
"0","survey_data$religion[survey_data$religion == ""17""] <- ""Has religious affiliation""  "
"0","survey_data$religion[survey_data$religion == ""18""] <- ""Has religious affiliation""  "
"0","survey_data$religion[survey_data$religion == ""19""] <- ""Has religious affiliation""  "
"0","survey_data$religion[survey_data$religion == ""20""] <- ""Has religious affiliation""  "
"0","survey_data$religion[survey_data$religion == ""21""] <- ""No religious affiliation"""
"0","survey_data$religion[survey_data$religion == ""22""] <- ""No religious affiliation"""
"0","survey_data <- survey_data[!(survey_data$religion == -8),]"
"0","survey_data <- survey_data[!(survey_data$english == 1 & survey_data$french == 1),]"
"0","survey_data <- survey_data[!(survey_data$english == 0 & survey_data$french == 0),]"
"0","survey_data <- survey_data[!(survey_data$english == -9 | survey_data$english == -8),]"
"0","survey_data <- survey_data[!(survey_data$french == -9 | survey_data$french == -8),]"
"0","survey_data <- subset(survey_data, select = -c(french))"
"0","survey_data <- survey_data %>% rename(language = english)"
"0","survey_data$religion[survey_data$religion == ""No religious affiliation""] <- 2"
"0","survey_data$religion[survey_data$religion == ""Has religious affiliation""] <- 1"
"0","survey_data$religion[survey_data$religion == ""Don't know""] <- 0"
"0","survey_data$income[survey_data$income == ""Less than $25,000""] <- 1"
"0","survey_data$income[survey_data$income == ""$25,000 to $49,999""] <- 2"
"0","survey_data$income[survey_data$income == ""$50,000 to $74,999""] <- 3"
"0","survey_data$income[survey_data$income == ""$75,000 to $99,999""] <- 4"
"0","survey_data$income[survey_data$income == ""$100,000 to $ 124,999""] <- 5"
"0","survey_data$income[survey_data$income == ""$125,000 and more""] <- 6"
"0",""
